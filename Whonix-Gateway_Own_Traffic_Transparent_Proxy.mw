{{Header}}
{{title|title=
{{project_name_gateway_long}} Traffic: Transparent Proxying
}}
{{#seo:
|description=Getting Transparent Proxying working for traffic originating from {{project_name_gateway_short}} itself.
|image=Traffic-332857640.jpg
}}
[[File:Traffic-332857640.jpg|thumb]]
{{intro|
Getting Transparent Proxying working for traffic originating from {{project_name_gateway_short}} itself.
}}
= Introduction =
{{Box|text=
{{TorifiedGateway}}
}}

{{Box|text=
<u>{{project_name_workstation_long}} has the transparent proxying feature enabled by default.</u> (You could [[Stream_Isolation#Better_Protection|disable it]] if you wanted to.)
}}

{{Box|text=
<u>{{project_name_gateway_short}} has by default '''no''' transparent proxying feature.</u>

The same in other words: {{project_name_gateway_short}} by default transparently proxies traffic originating from {{project_name_workstation_short}}, but does not transparently proxy traffic that is generated by {{project_name_gateway_short}}.

Instructions below document how <u>you could enable it</u>. There are no known use cases besides [[Dev/Leak Tests|leak testing]].
}}

= How-to: Enable Transparent Proxying for {{project_name_gateway_short}} own Traffic =
{{Box|text=
'''Advanced users only!''' <br />
'''Usually recommended against and unnecessary!'''

{{Firewall_Settings_Gateway}}

Add the following content.

{{CodeSelect|code=
GATEWAY_TRANSPARENT_TCP=1
GATEWAY_TRANSPARENT_DNS=1
}}

Save.

{{Reload_Firewall}}

{{Open /usr/local/etc/torrc.d/50_user.conf}}

Add the following content.

{{CodeSelect|code=
TransPort 127.0.0.1:9041
DnsPort 127.0.0.1:54
}}

Save.

{{Reload_Tor}}

Test if you wish.

{{CodeSelect|code=
{{Curl_Plain}} {{Curl_Secure}} -H 'Host: check.torproject.org' -k https://{{Check.torproject.org IP}} | grep IP
}}
}}

= See Also =
* [[{{project_name_gateway_short}} System DNS|Getting the global system DNS resolver working on {{project_name_gateway_short}} (usually recommended against and unnecessary)]]

= Footnotes =
{{reflist|close=1}}

{{Footer}}

[[Category:Documentation]]